import APP from './conf';
import './pages/login'
import './types'

// Load conf

// Soft page transition

// render page on load
const dashboard = document.createElement('c-dashboard');
APP.appendChild(dashboard);

// router
const routes = [
    {
        p: '/',
        c: document.createElement('c-dashboard')
    },
    {
        p: '/contact-us',
        c: '<span>this is contact-us</span>'
    },
]

const router = (path: string) => {
    window.history.pushState({}, '', path)

    routes.forEach(route => {
        route.p === path && typeof route.c === 'string'
            ? APP.innerHTML = route.c
            : APP.appendChild(route.c)
    })
}

window.router = router

window.onpopstate = () => {
    const path = window.location.pathname;
    router(path);
};
